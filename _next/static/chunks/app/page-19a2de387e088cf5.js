(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6377:function(e,i,t){Promise.resolve().then(t.bind(t,1715))},1715:function(e,i,t){"use strict";t.d(i,{default:function(){return m}});var n=t(7437),s=t(2265),l=t(3732);function a(e){let{bannerConfig:i,templates:t,colors:s,fonts:a,bannerSizes:o,onImageUpload:r,onTemplateChange:c,onColorChange:d,onTextChange:h,onFontChange:m,onImagePositionChange:g,onBannerSizeChange:x,onDownload:u,onRegisterMaterial:f}=e,{template:p,image:j}=i;return(0,n.jsxs)("div",{className:"controls",children:[(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"배너 사이즈"}),(0,n.jsx)("div",{className:"size-selection",children:o.map(e=>(0,n.jsxs)("div",{className:"size-item ".concat(e.id===i.bannerSize.id?"selected":""),onClick:()=>x(e),children:[(0,n.jsx)("div",{className:"size-preview",children:(0,n.jsx)("div",{style:{width:"80px",height:"".concat("compact"===e.id?"18px":"26px"),border:"1px solid #ddd",backgroundColor:"#f5f5f5",borderRadius:"4px",margin:"0 auto"}})}),(0,n.jsx)("div",{className:"size-label",children:e.name})]},e.id))})]}),(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"템플릿"}),(0,n.jsx)("div",{className:"template-grid",children:t.map(e=>(0,n.jsxs)("div",{className:"template-item ".concat(e.id===p.id?"selected":""),onClick:()=>c(e),children:[(0,n.jsx)("div",{className:"template-preview",style:{backgroundColor:i.backgroundColor},children:"rounded"===e.imageStyle?(0,n.jsx)("div",{className:"rounded-indicator ".concat(e.imagePosition,"-indicator")}):(0,n.jsx)("div",{className:"semicircle-indicator ".concat(e.imagePosition,"-indicator")})}),(0,n.jsxs)("span",{style:{marginLeft:"8px",color:"#999999",fontSize:"0.9rem"},children:["left"===e.imagePosition?"왼쪽":"오른쪽"," ","rounded"===e.imageStyle?"사각형":"반원형"]})]},e.id))})]}),(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"이미지"}),(0,n.jsxs)("div",{className:"image-upload",children:[(0,n.jsx)("input",{type:"file",accept:"image/*",onChange:r,id:"image-upload",style:{display:"none"}}),(0,n.jsx)("label",{htmlFor:"image-upload",className:"upload-button",children:"이미지 업로드"}),i.image&&(0,n.jsx)("span",{className:"image-status",children:"이미지가 업로드됨"})]})]}),null!==j&&(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"이미지 위치 조정"}),(0,n.jsxs)("div",{className:"slider-container",children:[(0,n.jsx)("input",{type:"range",min:"0",max:"100",value:i.imagePositionX,onChange:e=>g(parseInt(e.target.value)),className:"position-slider"}),(0,n.jsxs)("div",{className:"slider-labels",children:[(0,n.jsx)("span",{children:"왼쪽"}),(0,n.jsx)("span",{children:"오른쪽"})]})]})]}),(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"배경 색상"}),(0,n.jsx)("div",{className:"color-grid",children:s.map(e=>(0,n.jsx)("div",{className:"color-item ".concat(e===i.backgroundColor?"selected":""),style:{backgroundColor:e},onClick:()=>d(e)},e))})]}),(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"폰트"}),(0,n.jsx)("div",{className:"font-selection",children:a.map(e=>(0,n.jsx)("div",{className:"font-item ".concat(e.id===i.font.id?"selected":""),onClick:()=>m(e),children:(0,n.jsx)("div",{className:"font-preview ".concat(e.className),children:e.name})},e.id))})]}),(0,n.jsxs)("div",{className:"control-section",children:[(0,n.jsx)("h2",{children:"텍스트"}),(0,n.jsxs)("div",{className:"text-inputs",children:[(0,n.jsxs)("div",{className:"input-group",children:[(0,n.jsx)("label",{children:"타이틀"}),(0,n.jsx)("input",{type:"text",value:i.title,onChange:e=>h("title",e.target.value),placeholder:"타이틀을 입력하세요"})]}),(0,n.jsxs)("div",{className:"input-group",children:[(0,n.jsx)("label",{children:"서브타이틀"}),(0,n.jsx)("input",{type:"text",value:i.subtitle,onChange:e=>h("subtitle",e.target.value),placeholder:"서브타이틀을 입력하세요"})]})]})]}),(0,n.jsx)("div",{className:"control-section",children:(0,n.jsxs)("div",{className:"button-group",children:[(0,n.jsx)("button",{onClick:()=>{let e=document.querySelector(".banner");e&&(e.style.borderRadius="0",(0,l.YM)(e).then(i=>{let t=document.createElement("a");t.download="banner.png",t.href=i,t.click(),e.style.borderRadius="12px"}).catch(e=>{console.error("다운로드 오류:",e)}))},className:"download-button",children:"다운로드"}),(0,n.jsx)("button",{onClick:f,className:"register-button",children:"소재에 등록"})]})})]})}let o=(0,s.forwardRef)((e,i)=>{let{bannerConfig:t}=e,{title:l,subtitle:a,backgroundColor:o,template:r,image:c,font:d,imagePositionX:h,bannerSize:m}=t,g="compact"===m.id,x=g?"1.5rem":"3.0rem",u=()=>"rounded"===r.imageStyle?g?"110px":"160px":g?m.height:"240px",f=()=>g?200:280;return(0,s.useEffect)(()=>{c&&(console.log("이미지 데이터 존재:",c.substring(0,50)+"..."),console.log("현재 템플릿:",r.id))},[c,r.id]),(0,n.jsx)("div",{className:"preview",children:(0,n.jsx)("div",{ref:i,className:"banner",style:{backgroundColor:o,position:"relative",width:m.width,height:m.height,overflow:"hidden",borderRadius:"12px"},children:"semicircle"===r.imageStyle?(()=>{let e="left"===r.imagePosition,i=f(),t=c&&void 0!==h?"".concat(h,"% center"):e?"left center":"right center",s=m.width-i-80;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:d.className,style:{position:"absolute",[e?"right":"left"]:"40px",width:"".concat(s,"px"),top:"50%",transform:"translateY(-50%)",color:"white",textAlign:e?"right":"left",zIndex:2},children:[(0,n.jsx)("h1",{style:{fontSize:"3.0rem",marginBottom:"8px",fontWeight:"normal"},children:l}),(0,n.jsx)("h2",{style:{fontSize:x,fontWeight:"normal"},children:a})]}),(0,n.jsx)("div",{style:{position:"absolute",[e?"left":"right"]:0,top:"50%",transform:"translateY(-50%)",width:i,height:i,borderRadius:e?"0 50% 50% 0":"50% 0 0 50%",overflow:"hidden",zIndex:1},children:c?(0,n.jsx)("div",{style:{position:"absolute",width:"100%",height:"100%",overflow:"hidden"},children:(0,n.jsx)("img",{src:c,alt:"배너 이미지",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:t},onError:e=>{console.error("이미지 로드 오류:",e),alert("이미지를 불러오는 중 오류가 발생했습니다.")}})}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",border:"1px dashed #cccccc",borderRadius:e?"0 50% 50% 0":"50% 0 0 50%"},children:(0,n.jsx)("span",{style:{color:"#bbbbbb",fontSize:"0.9rem",textAlign:"center",paddingLeft:e?"50px":"0",paddingRight:e?"0":"50px"},children:"이미지를 선택해주세요"})})})]})})():(()=>{let e="left"===r.imagePosition,i=c&&void 0!==h?"".concat(h,"% center"):"center";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{position:"absolute",[e?"left":"right"]:"40px",top:"50%",transform:"translateY(-50%)",width:"210px",height:u()},children:c?(0,n.jsx)("div",{style:{width:"100%",height:"100%",borderRadius:"12px",overflow:"hidden"},children:(0,n.jsx)("img",{src:c,alt:"배너 이미지",style:{width:"100%",height:"100%",objectFit:"cover",objectPosition:i},onError:e=>{console.error("이미지 로드 오류:",e),e.target.style.display="none"}})}):(0,n.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"12px",overflow:"hidden",border:"1px dashed #cccccc"},children:(0,n.jsx)("span",{style:{color:"#bbbbbb",fontSize:"0.9rem",textAlign:"center"},children:"이미지를 선택해주세요"})})}),(0,n.jsxs)("div",{className:d.className,style:{position:"absolute",[e?"left":"right"]:"290px",[e?"right":"left"]:"40px",top:"50%",transform:"translateY(-50%)",color:"white"},children:[(0,n.jsx)("h1",{style:{fontSize:"3.0rem",marginBottom:"8px",fontWeight:"normal"},children:l}),(0,n.jsx)("h2",{style:{fontSize:x,fontWeight:"normal"},children:a})]})]})})()})})});o.displayName="BannerPreview";let r=["#f87171","#fb923c","#facc15","#4ade80","#60a5fa","#a78bfa","#f472b6","#1e293b"],c=[{id:"standard",name:"720 x 240",width:720,height:240},{id:"compact",name:"720 x 160",width:720,height:160}],d=[{id:"left-image-rounded",name:"왼쪽 이미지",imagePosition:"left",textPosition:"right",imageStyle:"rounded"},{id:"right-image-rounded",name:"오른쪽 이미지",imagePosition:"right",textPosition:"left",imageStyle:"rounded"},{id:"semicircle-left",name:"둥근 왼쪽 이미지",imagePosition:"left",textPosition:"right",imageStyle:"semicircle"},{id:"semicircle-right",name:"둥근 오른쪽 이미지",imagePosition:"right",textPosition:"left",imageStyle:"semicircle"}],h=[{id:"hanna-pro",name:"배민 한나체 Pro",className:"font-hanna-pro"},{id:"jua",name:"배민 주아체",className:"font-jua"},{id:"hanna-air",name:"배민 한나체 Air",className:"font-hanna-air"}];function m(){let[e,i]=(0,s.useState)({title:"타이틀 입력",subtitle:"서브타이틀 입력",backgroundColor:r[0],template:d[0],image:null,font:h[0],imagePositionX:50,bannerSize:c[0]}),t=(0,s.useRef)(null),m=async()=>{if(t.current)try{let e=await (0,l.YM)(t.current,{quality:.95}),i=document.createElement("a");i.download="banner.png",i.href=e,i.click()}catch(e){console.error("이미지 생성 중 오류가 발생했습니다:",e)}};return(0,n.jsxs)("div",{className:"editor-container",children:[(0,n.jsx)(a,{bannerConfig:e,templates:d,colors:r,fonts:h,bannerSizes:c,onImageUpload:e=>{let t=e.target.files[0];if(console.log("File selected:",t),t){if(!t.type.startsWith("image/")){console.error("Selected file is not an image:",t.type),alert("이미지 파일만 업로드 가능합니다.");return}let e=new FileReader;e.onload=e=>{console.log("File loaded successfully");let t=e.target.result;i(e=>({...e,image:t}))},e.onerror=e=>{console.error("Error loading image:",e),alert("이미지를 불러오는 중 오류가 발생했습니다.")};try{e.readAsDataURL(t)}catch(e){console.error("Error reading file:",e),alert("파일을 읽는 중 오류가 발생했습니다.")}}},onTemplateChange:t=>{i({...e,template:t})},onColorChange:t=>{i({...e,backgroundColor:t})},onTextChange:(t,n)=>{i({...e,[t]:n})},onFontChange:t=>{i({...e,font:t})},onImagePositionChange:t=>{i({...e,imagePositionX:t})},onBannerSizeChange:t=>{i({...e,bannerSize:t})},onDownload:m,onRegisterMaterial:()=>{alert("소재 이미지로 등록되었습니다")}}),(0,n.jsx)(o,{ref:t,bannerConfig:e})]})}}},function(e){e.O(0,[732,971,117,744],function(){return e(e.s=6377)}),_N_E=e.O()}]);